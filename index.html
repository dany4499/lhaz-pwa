<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üöÅ LHAZ - Sistema Sorteo H√©lices</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        /* ========== TEMAS D√çA/NOCHE ========== */
        .tema-noche {
            --bg-primary: linear-gradient(135deg, #000, #1a1a1a);
            --bg-secondary: #2a2a2a;
            --bg-tertiario: #1a1a1a;
            --color-texto: white;
            --color-borde: #666;
            --color-accent: #FFD700;
            --color-success: #00FF00;
            --color-warning: #FF9900;
            --color-danger: #FF0000;
            --color-info: #00CCFF;
        }

        .tema-dia {
            --bg-primary: linear-gradient(135deg, #f0f8ff, #e6f3ff);
            --bg-secondary: #ffffff;
            --bg-tertiario: #f5f5f5;
            --color-texto: #2c3e50;
            --color-borde: #bdc3c7;
            --color-accent: #f39c12;
            --color-success: #27ae60;
            --color-warning: #e67e22;
            --color-danger: #e74c3c;
            --color-info: #3498db;
        }

        body {
            font-family: Arial, sans-serif;
            background: var(--bg-primary);
            color: var(--color-texto);
            min-height: 100vh;
            padding: 20px;
            display: flex;
            flex-direction: column;
            transition: all 0.5s ease;
        }

        /* ========== T√çTULO LHAZ ULTRA VISIBLE - TODAS LAS LETRAS ========== */
        .titulo-principal {
            text-align: center;
            margin: 0 0 40px 0;
            font-family: 'Impact', 'Arial Black', Arial, sans-serif;
            font-weight: 900;
            font-size: 7rem;
            line-height: 1;
            letter-spacing: 0.15em;
            text-transform: uppercase;
            position: relative;
            padding: 40px 20px;
            /* Fondo m√°s oscuro para mayor contraste */
            background: rgba(0, 0, 0, 0.85);
            border-radius: 25px;
            border: 4px solid #FFD700;
            box-shadow: 0 0 50px rgba(255, 215, 0, 0.6);
        }

        .titulo-principal .texto-lhaz {
            /* Color s√≥lido blanco puro para m√°xima visibilidad */
            color: #FFFFFF;
            /* Contorno negro s√∫per grueso */
            text-shadow: 
                /* Contorno negro m√∫ltiple para m√°ximo contraste */
                -4px -4px 0px #000000,
                4px -4px 0px #000000,
                -4px 4px 0px #000000,
                4px 4px 0px #000000,
                0px -4px 0px #000000,
                0px 4px 0px #000000,
                -4px 0px 0px #000000,
                4px 0px 0px #000000,
                /* Contorno doble para m√°s grosor */
                -6px -6px 0px #000000,
                6px -6px 0px #000000,
                -6px 6px 0px #000000,
                6px 6px 0px #000000,
                /* Resplandor dorado intenso */
                0 0 20px #FFD700,
                0 0 40px #FFD700,
                0 0 60px #FFD700,
                0 0 80px #FFD700,
                /* Resplandor blanco adicional */
                0 0 100px #FFFFFF;
            
            position: relative;
            display: inline-block;
            
            /* SIN gradiente para evitar transparencias */
            background: none;
            -webkit-text-fill-color: #FFFFFF;
            
            /* Filtros para mayor brillo y contraste */
            filter: 
                drop-shadow(0 0 25px rgba(255, 215, 0, 1))
                drop-shadow(0 0 50px rgba(255, 255, 255, 0.8))
                contrast(2)
                brightness(1.5);
                
            /* Animaci√≥n m√°s suave */
            animation: pulso-suave 3s ease-in-out infinite alternate;
        }

        @keyframes pulso-suave {
            0% {
                transform: scale(1);
                filter: 
                    drop-shadow(0 0 25px rgba(255, 215, 0, 1))
                    drop-shadow(0 0 50px rgba(255, 255, 255, 0.8))
                    contrast(2)
                    brightness(1.5);
            }
            100% {
                transform: scale(1.02);
                filter: 
                    drop-shadow(0 0 35px rgba(255, 215, 0, 1))
                    drop-shadow(0 0 70px rgba(255, 255, 255, 1))
                    contrast(2.2)
                    brightness(1.7);
            }
        }

        /* Resplandor de fondo pulsante */
        .titulo-principal::before {
            content: '';
            position: absolute;
            top: -10px;
            left: -10px;
            right: -10px;
            bottom: -10px;
            background: radial-gradient(circle, rgba(255, 215, 0, 0.3) 0%, transparent 70%);
            border-radius: 35px;
            z-index: -1;
            animation: resplandor-fondo 4s ease-in-out infinite alternate;
        }

        @keyframes resplandor-fondo {
            0% {
                opacity: 0.3;
                transform: scale(0.95);
            }
            100% {
                opacity: 0.7;
                transform: scale(1.05);
            }
        }

        /* Adaptaci√≥n para temas - M√ÅXIMA VISIBILIDAD */
        .tema-dia .titulo-principal {
            background: rgba(255, 255, 255, 0.95);
            border: 4px solid #f39c12;
            box-shadow: 0 0 60px rgba(243, 156, 18, 0.8);
        }

        .tema-dia .titulo-principal .texto-lhaz {
            color: #000000;
            text-shadow: 
                /* Contorno blanco grueso para d√≠a */
                -4px -4px 0px #FFFFFF,
                4px -4px 0px #FFFFFF,
                -4px 4px 0px #FFFFFF,
                4px 4px 0px #FFFFFF,
                0px -4px 0px #FFFFFF,
                0px 4px 0px #FFFFFF,
                -4px 0px 0px #FFFFFF,
                4px 0px 0px #FFFFFF,
                /* Contorno doble blanco */
                -6px -6px 0px #FFFFFF,
                6px -6px 0px #FFFFFF,
                -6px 6px 0px #FFFFFF,
                6px 6px 0px #FFFFFF,
                /* Resplandor naranja */
                0 0 20px #f39c12,
                0 0 40px #f39c12,
                0 0 60px #f39c12;
            
            -webkit-text-fill-color: #000000;
        }

        .tema-noche .titulo-principal {
            background: rgba(0, 0, 0, 0.95);
            border: 4px solid #FFD700;
            box-shadow: 0 0 60px rgba(255, 215, 0, 0.8);
        }

        /* Efecto hover m√°s intenso */
        .titulo-principal:hover .texto-lhaz {
            animation-duration: 0.5s;
            transform: scale(1.05);
            transition: transform 0.3s ease;
            text-shadow: 
                -5px -5px 0px #000000,
                5px -5px 0px #000000,
                -5px 5px 0px #000000,
                5px 5px 0px #000000,
                0px -5px 0px #000000,
                0px 5px 0px #000000,
                -5px 0px 0px #000000,
                5px 0px 0px #000000,
                -8px -8px 0px #000000,
                8px -8px 0px #000000,
                -8px 8px 0px #000000,
                8px 8px 0px #000000,
                0 0 30px #FFD700,
                0 0 60px #FFD700,
                0 0 90px #FFD700,
                0 0 120px #FFFFFF;
        }

        /* Parpadeo de atenci√≥n ocasional */
        .titulo-principal .texto-lhaz {
            animation: 
                pulso-suave 3s ease-in-out infinite alternate,
                atencion-parpadeo 12s ease-in-out infinite;
        }

        @keyframes atencion-parpadeo {
            0%, 85%, 100% {
                opacity: 1;
            }
            90% {
                opacity: 0.8;
            }
            95% {
                opacity: 1;
                transform: scale(1.03);
            }
        }

        .cabecera {
            display: flex;
            justify-content: space-between;
            background: var(--bg-secondary);
            border: 3px solid var(--color-borde);
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 20px;
            transition: all 0.5s ease;
        }

        .btn-tiro {
            background: var(--bg-tertiario);
            border: 2px solid var(--color-borde);
            color: var(--color-texto);
            padding: 10px 15px;
            border-radius: 8px;
            cursor: pointer;
            margin: 0 5px;
            transition: all 0.3s ease;
        }

        .btn-tiro.activo { 
            background: var(--color-accent); 
            color: var(--bg-tertiario); 
        }

        .btn-tiro:hover { transform: scale(1.1); }

        .btn-circular {
            background: var(--bg-tertiario);
            border: 2px solid var(--color-borde);
            color: var(--color-texto);
            width: 45px;
            height: 45px;
            border-radius: 50%;
            cursor: pointer;
            margin: 0 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .btn-circular:hover { 
            transform: scale(1.1); 
        }

        .tema-dia .btn-circular:hover {
            box-shadow: 0 0 15px rgba(52, 152, 219, 0.5);
        }

        .tema-noche .btn-circular:hover {
            box-shadow: 0 0 15px rgba(0, 204, 255, 0.5);
        }

        .panel-estado {
            background: var(--bg-secondary);
            border: 2px solid var(--color-borde);
            padding: 15px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            transition: all 0.5s ease;
        }

        /* CUADROS DE MOTOR */
        .grilla-helices {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
            margin: 20px 0;
            max-width: 800px;
            margin: 20px auto;
        }

        .helice-item {
            aspect-ratio: 1;
            width: 120px;
            height: 120px;
            background: var(--bg-tertiario);
            border: 3px solid var(--color-borde);
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            position: relative;
            transition: all 0.3s ease;
        }

        .helice-item:hover { 
            transform: scale(1.03); 
        }

        .tema-dia .helice-item:hover {
            box-shadow: 0 4px 15px rgba(52, 152, 219, 0.3);
        }

        .tema-noche .helice-item:hover {
            box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3);
        }

        .helice-item.inicial {
            background: var(--bg-tertiario);
            border-color: var(--color-borde);
        }

        .helice-item.encendida {
            border-color: var(--color-success);
            background: color-mix(in srgb, var(--color-success) 20%, var(--bg-tertiario));
        }

        .helice-item.eliminada { 
            border-color: var(--color-borde); 
            opacity: 0.4; 
            cursor: not-allowed; 
        }

        .helice-item.excluida { 
            border-color: var(--color-warning); 
            opacity: 0.7; 
            background: color-mix(in srgb, var(--color-warning) 20%, var(--bg-tertiario));
        }

        .helice-item.secuencia-actual { 
            border-color: #FF6600; 
            animation: destaque-pequeno 0.5s ease-in-out infinite alternate;
        }

        .helice-item.disparando {
            border-color: #FF0000;
            animation: efecto-disparo-pequeno 1.5s ease-out;
        }

        .helice-item.recuperando {
            border-color: #0088FF;
            animation: efecto-recupero 1s ease-out;
        }

        @keyframes destaque-pequeno {
            from { box-shadow: 0 0 15px rgba(255, 102, 0, 0.7); }
            to { box-shadow: 0 0 25px rgba(255, 102, 0, 0.9); }
        }

        @keyframes efecto-disparo-pequeno {
            0% { transform: scale(1); box-shadow: 0 0 15px rgba(255, 0, 0, 0.6); }
            50% { transform: scale(1.1); box-shadow: 0 0 30px rgba(255, 0, 0, 1); }
            100% { transform: scale(0.95); box-shadow: 0 0 8px rgba(255, 0, 0, 0.3); }
        }

        @keyframes efecto-recupero {
            0% { opacity: 0.3; transform: scale(0.8); }
            50% { opacity: 0.8; transform: scale(1.1); }
            100% { opacity: 1; transform: scale(1); }
        }

        .numero-helice {
            position: absolute;
            top: 5px;
            left: 5px;
            color: var(--color-accent);
            font-weight: bold;
            font-size: 12px;
        }

        .aspas {
            width: 70px;
            height: 70px;
            position: relative;
        }

        .aspas.girando { 
            animation: rotar 0.08s linear infinite; 
        }

        @keyframes rotar { 
            from { transform: rotate(0deg); } 
            to { transform: rotate(360deg); } 
        }

        .aspa {
            position: absolute;
            background: var(--color-accent);
            border-radius: 3px;
            box-shadow: 0 0 5px rgba(255, 215, 0, 0.5);
        }

        .aspa:nth-child(1) { 
            top: 50%; 
            left: 8%; 
            width: 84%; 
            height: 4px; 
            transform: translateY(-50%); 
        }

        .aspa:nth-child(2) { 
            top: 8%; 
            left: 50%; 
            width: 4px; 
            height: 84%; 
            transform: translateX(-50%); 
        }

        .rpm-display {
            position: absolute;
            bottom: 2px;
            font-size: 9px;
            color: var(--color-texto);
            opacity: 0.7;
        }

        .controles {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 20px;
        }

        .btn-control {
            background: var(--bg-tertiario);
            border: 3px solid var(--color-borde);
            color: var(--color-texto);
            padding: 15px 20px;
            border-radius: 10px;
            cursor: pointer;
            font-weight: bold;
            min-width: 120px;
            transition: all 0.3s ease;
        }

        .btn-control:disabled { opacity: 0.5; cursor: not-allowed; }

        .btn-sortear { border-color: #FFD700; }
        .btn-sortear:hover:not(:disabled) { background: #FFD700; color: black; transform: scale(1.05); }

        .btn-disparar { border-color: #FF6600; }
        .btn-disparar.listo { 
            border-color: #FF0000; 
            animation: pulso 1s ease-in-out infinite alternate;
        }

        @keyframes pulso {
            from { box-shadow: 0 0 15px rgba(255, 0, 0, 0.6); }
            to { box-shadow: 0 0 30px rgba(255, 0, 0, 0.9); }
        }

        .btn-recupero { border-color: #0088FF; }
        .btn-recupero.disponible {
            animation: pulso-recupero 2s ease-in-out infinite alternate;
        }

        @keyframes pulso-recupero {
            from { box-shadow: 0 0 15px rgba(0, 136, 255, 0.6); }
            to { box-shadow: 0 0 25px rgba(0, 136, 255, 0.8); }
        }

        .info-ultima { 
            background: var(--bg-secondary); 
            border: 2px solid var(--color-borde); 
            padding: 10px; 
            margin-bottom: 20px; 
            text-align: center; 
            transition: all 0.3s ease;
        }

        .info-ultima.disponible {
            border-color: #0088FF;
            background: color-mix(in srgb, var(--color-info) 20%, var(--bg-secondary));
            box-shadow: 0 0 20px rgba(0, 136, 255, 0.4);
        }

        .indicador-secuencia { 
            background: color-mix(in srgb, var(--color-info) 20%, var(--bg-secondary));
            border: 2px solid var(--color-info); 
            padding: 15px; 
            text-align: center; 
            margin-bottom: 20px; 
            display: none; 
        }

        .indicador-secuencia.activo { display: block; }

        /* PANELES */
        .panel-rpm {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: var(--bg-secondary);
            border: 3px solid #FFD700;
            border-radius: 15px;
            padding: 30px;
            z-index: 1000;
            min-width: 400px;
            display: none;
            transition: all 0.5s ease;
        }

        .panel-rpm.activo { display: block; }
        .panel-rpm h3 { color: #FFD700; text-align: center; margin-bottom: 20px; }

        .rpm-control {
            margin: 15px 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .rpm-slider {
            width: 60%;
            height: 5px;
            background: #333;
            border-radius: 5px;
            outline: none;
            cursor: pointer;
        }

        .rpm-valor {
            color: #00FF00;
            font-weight: bold;
            min-width: 80px;
        }

        .panel-audio {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: var(--bg-secondary);
            border: 3px solid #00FF00;
            border-radius: 15px;
            padding: 30px;
            z-index: 1000;
            min-width: 350px;
            display: none;
            transition: all 0.5s ease;
        }

        .panel-audio.activo { display: block; }
        .panel-audio h3 { color: #00FF00; text-align: center; margin-bottom: 20px; }

        .audio-control {
            margin: 15px 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .audio-btn {
            background: var(--bg-tertiario);
            border: 2px solid #00FF00;
            color: #00FF00;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .audio-btn:hover { background: #00FF00; color: black; }
        .audio-btn.activo { background: #00FF00; color: black; }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: color-mix(in srgb, var(--bg-tertiario) 80%, transparent);
            z-index: 999;
            display: none;
        }

        .overlay.activo { display: block; }

        .countdown-urgente {
            animation: parpadeo-urgente 0.5s ease-in-out;
        }

        @keyframes parpadeo-urgente {
            0% { background: var(--bg-primary); }
            50% { background: color-mix(in srgb, var(--color-danger) 30%, var(--bg-primary)); }
            100% { background: var(--bg-primary); }
        }

        /* RESPONSIVE PARA T√çTULO ULTRA VISIBLE */
        @media (max-width: 768px) {
            .titulo-principal {
                font-size: 5rem;
                margin-bottom: 25px;
                padding: 25px 15px;
                letter-spacing: 0.1em;
            }
            
            .grilla-helices {
                gap: 8px;
                max-width: 600px;
            }
            
            .helice-item {
                width: 100px;
                height: 100px;
            }
            
            .aspas {
                width: 60px;
                height: 60px;
            }
        }

        @media (max-width: 480px) {
            .titulo-principal {
                font-size: 3.5rem;
                letter-spacing: 0.08em;
                margin-bottom: 20px;
                padding: 20px 10px;
            }
            
            .helice-item {
                width: 80px;
                height: 80px;
            }
            
            .aspas {
                width: 50px;
                height: 50px;
            }
        }

        @media (max-width: 320px) {
            .titulo-principal {
                font-size: 2.8rem;
                letter-spacing: 0.05em;
                padding: 15px 5px;
            }
        }
    </style>
</head>
<body class="tema-noche">
    <div class="overlay" id="overlay" onclick="cerrarPaneles()"></div>

    <!-- T√çTULO LHAZ ULTRA VISIBLE - TODAS LAS LETRAS -->
    <div class="titulo-principal">
        <div class="texto-lhaz">LHAZ</div>
    </div>

    <div class="cabecera">
        <div>
            <span style="color: #FFD700; font-weight: bold; margin-right: 15px;">Tiros:</span>
            <button class="btn-tiro" onclick="seleccionarTiros(2)">2</button>
            <button class="btn-tiro activo" onclick="seleccionarTiros(3)">3</button>
            <button class="btn-tiro" onclick="seleccionarTiros(5)">5</button>
        </div>
        <div>
            <button class="btn-circular" onclick="toggleTema()" id="btnTema" title="Cambiar D√≠a/Noche">üåô</button>
            <button class="btn-circular" onclick="abrirPanelRPM()" title="Control RPM">‚öôÔ∏è</button>
            <button class="btn-circular" id="btnRotacion" onclick="toggleRotacion()" title="Rotaci√≥n Auto">üîÑ</button>
            <button class="btn-circular" id="btnAudio" onclick="abrirPanelAudio()" title="Control Audio">üé§</button>
            <button class="btn-circular" onclick="descargarApp()" title="Descargar App">üì±</button>
        </div>
    </div>

    <div class="panel-estado">
        <div id="estadoPrincipal" style="color: #FFD700;">Sistema listo - Presiona SORTEAR para iniciar tiro 1/3</div>
        <div id="tirosRestantes" style="color: #00CCFF;">Tiros Restantes: 3</div>
    </div>

    <div class="indicador-secuencia" id="indicadorSecuencia">
        <div style="color: #00FFFF; font-size: 18px; font-weight: bold;">üéØ SECUENCIA CIRCULAR ACTIVA</div>
        <div id="secuenciaActual" style="color: white; font-family: monospace;">Preparando...</div>
    </div>

    <div class="grilla-helices">
        <div class="helice-item inicial" data-motor="1" onclick="clickHelice(1)">
            <div class="numero-helice">1</div>
            <div class="aspas" id="aspas1">
                <div class="aspa"></div>
                <div class="aspa"></div>
            </div>
            <div class="rpm-display" id="rpm1">RPM: 0</div>
        </div>
        <div class="helice-item inicial" data-motor="2" onclick="clickHelice(2)">
            <div class="numero-helice">2</div>
            <div class="aspas" id="aspas2">
                <div class="aspa"></div>
                <div class="aspa"></div>
            </div>
            <div class="rpm-display" id="rpm2">RPM: 0</div>
        </div>
        <div class="helice-item inicial" data-motor="3" onclick="clickHelice(3)">
            <div class="numero-helice">3</div>
            <div class="aspas" id="aspas3">
                <div class="aspa"></div>
                <div class="aspa"></div>
            </div>
            <div class="rpm-display" id="rpm3">RPM: 0</div>
        </div>
        <div class="helice-item inicial" data-motor="4" onclick="clickHelice(4)">
            <div class="numero-helice">4</div>
            <div class="aspas" id="aspas4">
                <div class="aspa"></div>
                <div class="aspa"></div>
            </div>
            <div class="rpm-display" id="rpm4">RPM: 0</div>
        </div>
        <div class="helice-item inicial" data-motor="5" onclick="clickHelice(5)">
            <div class="numero-helice">5</div>
            <div class="aspas" id="aspas5">
                <div class="aspa"></div>
                <div class="aspa"></div>
            </div>
            <div class="rpm-display" id="rpm5">RPM: 0</div>
        </div>
    </div>

    <div class="info-ultima" id="infoUltima">
        <div id="textoUltima">√öltima h√©lice disparada: Ninguna</div>
    </div>

    <div class="controles">
        <button class="btn-control btn-sortear" id="btnSortear" onclick="iniciarSorteo()">üéØ SORTEAR</button>
        <button class="btn-control btn-disparar" id="btnDisparar" onclick="ejecutarDisparo()" disabled>üí• DISPARAR</button>
        <button class="btn-control btn-recupero" id="btnRecupero" onclick="recuperarHelice()" disabled>üîß RECUPERO</button>
        <button class="btn-control" onclick="resetearTodo()">üîÑ RESET</button>
    </div>

    <!-- PANEL RPM -->
    <div class="panel-rpm" id="panelRPM">
        <h3>üîß Control de RPM</h3>
        <div class="rpm-control">
            <span>H√©lice 1:</span>
            <input type="range" class="rpm-slider" min="0" max="5600" value="2500" 
                   onchange="cambiarRPM(1, this.value)" id="sliderRPM1">
            <span class="rpm-valor" id="valorRPM1">2500</span>
        </div>
        <div class="rpm-control">
            <span>H√©lice 2:</span>
            <input type="range" class="rpm-slider" min="0" max="5600" value="2500" 
                   onchange="cambiarRPM(2, this.value)" id="sliderRPM2">
            <span class="rpm-valor" id="valorRPM2">2500</span>
        </div>
        <div class="rpm-control">
            <span>H√©lice 3:</span>
            <input type="range" class="rpm-slider" min="0" max="5600" value="2500" 
                   onchange="cambiarRPM(3, this.value)" id="sliderRPM3">
            <span class="rpm-valor" id="valorRPM3">2500</span>
        </div>
        <div class="rpm-control">
            <span>H√©lice 4:</span>
            <input type="range" class="rpm-slider" min="0" max="5600" value="2500" 
                   onchange="cambiarRPM(4, this.value)" id="sliderRPM4">
            <span class="rpm-valor" id="valorRPM4">2500</span>
        </div>
        <div class="rpm-control">
            <span>H√©lice 5:</span>
            <input type="range" class="rpm-slider" min="0" max="5600" value="2500" 
                   onchange="cambiarRPM(5, this.value)" id="sliderRPM5">
            <span class="rpm-valor" id="valorRPM5">2500</span>
        </div>
        <div style="text-align: center; margin-top: 20px;">
            <button class="audio-btn" onclick="cerrarPanelRPM()">Cerrar</button>
        </div>2 parte  </div>

    <!-- PANEL AUDIO -->
    <div class="panel-audio" id="panelAudio">
        <h3>üé§ Control de Micr√≥fono</h3>
        <div class="audio-control">
            <span>Comando de voz:</span>
            <button class="audio-btn" id="btnComandoVoz" onclick="toggleComandoVoz()">Desactivado</button>
        </div>
        <div class="audio-control">
            <span>Ganancia:</span>
            <input type="range" class="rpm-slider" min="0" max="100" value="50" 
                   onchange="cambiarGanancia(this.value)" id="sliderGanancia">
            <span class="rpm-valor" id="valorGanancia">50%</span>
        </div>
        <div style="text-align: center; margin-top: 20px;">
            <button class="audio-btn" onclick="cerrarPanelAudio()">Cerrar</button>
        </div>
    </div>

    <script>
        let tirosTotales = 3;
        let tirosRestantes = 3;
        let tirosAntesDelDisparo = 0;
        let sorteoActivo = false;
        let ultimaHeliceDisparada = null;
        let intervaloSorteo = null;
        let timerAutoReset = null;
        let segundosRestantes = 0;
        let indiceSecuencial = 0;
        let helicesSecuencia = [];
        let temaActual = 'noche';

        let estadoHelices = {
            1: { encendida: false, excluida: false, eliminada: false, rpm: 2500 },
            2: { encendida: false, excluida: false, eliminada: false, rpm: 2500 },
            3: { encendida: false, excluida: false, eliminada: false, rpm: 2500 },
            4: { encendida: false, excluida: false, eliminada: false, rpm: 2500 },
            5: { encendida: false, excluida: false, eliminada: false, rpm: 2500 }
        };

        let configuracionAudio = {
            comandoVoz: false,
            ganancia: 50
        };

        let rotacionAutomatica = false;

        // ========== FUNCIONES DE TEMA ==========
        function toggleTema() {
            const body = document.body;
            const btnTema = document.getElementById('btnTema');
            
            if (temaActual === 'noche') {
                body.classList.remove('tema-noche');
                body.classList.add('tema-dia');
                btnTema.textContent = '‚òÄÔ∏è';
                btnTema.title = 'Cambiar a Modo Noche';
                temaActual = 'dia';
                
                document.getElementById('estadoPrincipal').textContent = '‚òÄÔ∏è MODO D√çA activado - Tema claro aplicado';
                console.log('üåÖ Cambiado a MODO D√çA');
                
            } else {
                body.classList.remove('tema-dia');
                body.classList.add('tema-noche');
                btnTema.textContent = 'üåô';
                btnTema.title = 'Cambiar a Modo D√≠a';
                temaActual = 'noche';
                
                document.getElementById('estadoPrincipal').textContent = 'üåô MODO NOCHE activado - Tema oscuro aplicado';
                console.log('üåô Cambiado a MODO NOCHE');
            }
            
            localStorage.setItem('tema-helicopteros', temaActual);
            vibrarFeedback();
        }

        function cargarTemaGuardado() {
            const temaGuardado = localStorage.getItem('tema-helicopteros');
            
            if (temaGuardado && temaGuardado !== temaActual) {
                toggleTema();
            } else {
                document.body.classList.add('tema-noche');
            }
        }

        // ========== FUNCIONES PRINCIPALES ==========
        function seleccionarTiros(cantidad) {
            if (sorteoActivo) return;
            tirosTotales = cantidad;
            tirosRestantes = cantidad;
            
            document.querySelectorAll('.btn-tiro').forEach(btn => btn.classList.remove('activo'));
            event.target.classList.add('activo');
            
            document.getElementById('tirosRestantes').textContent = `Tiros Restantes: ${tirosRestantes}`;
            document.getElementById('estadoPrincipal').textContent = `Configuraci√≥n: ${cantidad} tiros - Presiona SORTEAR`;
            console.log(`Configurado modo ${cantidad} tiros`);
        }

        function iniciarSorteo() {
            if (sorteoActivo) return;
            
            if (timerAutoReset) {
                clearInterval(timerAutoReset);
                timerAutoReset = null;
                segundosRestantes = 0;
                document.body.classList.remove('countdown-urgente');
                console.log('Auto-reset cancelado por nuevo sorteo');
            }
            
            helicesSecuencia = [];
            for (let i = 1; i <= 5; i++) {
                if (!estadoHelices[i].eliminada && !estadoHelices[i].excluida) {
                    helicesSecuencia.push(i);
                    estadoHelices[i].encendida = true;
                    actualizarHelice(i);
                    document.getElementById(`aspas${i}`).classList.add('girando');
                }
            }
            
            if (helicesSecuencia.length === 0) {
                document.getElementById('estadoPrincipal').textContent = 'No hay h√©lices disponibles - Usa RECUPERO o RESET';
                return;
            }
            
            sorteoActivo = true;
            indiceSecuencial = 0;
            
            document.getElementById('btnSortear').disabled = true;
            document.getElementById('indicadorSecuencia').classList.add('activo');
            
            iniciarSecuenciaCircular();
            document.getElementById('estadoPrincipal').textContent = `‚ö° SORTEO ACTIVO - ${helicesSecuencia.length} h√©lices participando - Click para EXCLUIR`;
            
            vibrarFeedback('sorteo');
            console.log(`Sorteo iniciado con ${helicesSecuencia.length} h√©lices`);
        }

        function iniciarSecuenciaCircular() {
            intervaloSorteo = setInterval(() => {
                document.querySelectorAll('.helice-item').forEach(h => h.classList.remove('secuencia-actual'));
                
                const heliceActual = helicesSecuencia[indiceSecuencial];
                const heliceElement = document.querySelector(`[data-motor="${heliceActual}"]`);
                if (heliceElement && !estadoHelices[heliceActual].eliminada && !estadoHelices[heliceActual].excluida) {
                    heliceElement.classList.add('secuencia-actual');
                }
                
                indiceSecuencial = (indiceSecuencial + 1) % helicesSecuencia.length;
                
                const secuencia = helicesSecuencia.map((h, idx) => 
                    idx === (indiceSecuencial - 1 + helicesSecuencia.length) % helicesSecuencia.length ? `[${h}]` : h
                ).join(' ‚Üí ');
                document.getElementById('secuenciaActual').textContent = secuencia + ' (Click h√©lice para excluir)';
                
            }, 200);
            
            setTimeout(() => {
                document.getElementById('btnDisparar').disabled = false;
                document.getElementById('btnDisparar').classList.add('listo');
            }, 1000);
        }

        function ejecutarDisparo() {
            if (!sorteoActivo) return;
            
            clearInterval(intervaloSorteo);
            sorteoActivo = false;
            
            const heliceSeleccionada = document.querySelector('.secuencia-actual');
            if (!heliceSeleccionada) {
                document.getElementById('estadoPrincipal').textContent = '‚ùå Error: No hay h√©lice seleccionada';
                return;
            }
            
            const motor = parseInt(heliceSeleccionada.getAttribute('data-motor'));
            tirosAntesDelDisparo = tirosRestantes;
            
            document.getElementById('btnDisparar').disabled = true;
            document.getElementById('btnDisparar').classList.remove('listo');
            
            document.querySelectorAll('.helice-item').forEach(h => h.classList.remove('secuencia-actual'));
            heliceSeleccionada.classList.add('disparando');
            
            for (let i = 1; i <= 5; i++) {
                document.getElementById(`aspas${i}`).classList.remove('girando');
            }
            
            document.getElementById('indicadorSecuencia').classList.remove('activo');
            document.getElementById('estadoPrincipal').textContent = `üí• H√âLICE ${motor} DISPARADA - Procesando eliminaci√≥n...`;
            
            vibrarFeedback('disparo');
            
            setTimeout(() => {
                estadoHelices[motor].eliminada = true;
                estadoHelices[motor].encendida = false;
                estadoHelices[motor].excluida = false;
                ultimaHeliceDisparada = motor;
                
                heliceSeleccionada.classList.remove('disparando');
                actualizarHelice(motor);
                
                tirosRestantes--;
                document.getElementById('tirosRestantes').textContent = `Tiros Restantes: ${tirosRestantes}`;
                document.getElementById('textoUltima').textContent = `√öltima h√©lice disparada: ${motor} - RECUPERO: Vuelve al sorteo si fall√≥`;
                
                const infoElement = document.getElementById('infoUltima');
                const btnRecupero = document.getElementById('btnRecupero');
                infoElement.classList.add('disponible');
                btnRecupero.disabled = false;
                btnRecupero.classList.add('disponible');
                
                const helicesDisponibles = helicesSecuencia.filter(h => !estadoHelices[h].eliminada).length - 1;
                
                if (tirosRestantes <= 0) {
                    document.getElementById('estadoPrincipal').textContent = `üèÅ JUEGO TERMINADO - Modo ${tirosTotales} completado - Auto-reset en 10s`;
                    document.getElementById('btnSortear').disabled = true;
                    iniciarAutoReset(10);
                    
                } else if (helicesDisponibles === 0) {
                    document.getElementById('estadoPrincipal').textContent = `üèÅ JUEGO TERMINADO - No quedan h√©lices - Auto-reset en 10s`;
                    document.getElementById('btnSortear').disabled = true;
                    iniciarAutoReset(10);
                    
                } else {
                    const tiroActual = tirosTotales - tirosRestantes + 1;
                    document.getElementById('estadoPrincipal').textContent = `‚úÖ H√©lice ${motor} ELIMINADA - ${helicesDisponibles} disponibles - Tiro ${tiroActual}/${tirosTotales}`;
                    document.getElementById('btnSortear').disabled = false;
                }
                
                helicesSecuencia = [];
                console.log(`H√©lice ${motor} eliminada. Tiros restantes: ${tirosRestantes}`);
                
            }, 1500);
        }

        function recuperarHelice() {
            if (!ultimaHeliceDisparada || sorteoActivo) return;
            
            console.log(`üîß RECUPERANDO h√©lice ${ultimaHeliceDisparada}`);
            
            if (timerAutoReset) {
                clearInterval(timerAutoReset);
                timerAutoReset = null;
                segundosRestantes = 0;
                document.body.classList.remove('countdown-urgente');
                console.log('‚è∞ Auto-reset CANCELADO por uso de RECUPERO');
            }
            
            const motor = ultimaHeliceDisparada;
            
            estadoHelices[motor].eliminada = false;
            estadoHelices[motor].excluida = false;
            estadoHelices[motor].encendida = false;
            
            const heliceElement = document.querySelector(`[data-motor="${motor}"]`);
            if (heliceElement) {
                heliceElement.classList.add('recuperando');
                setTimeout(() => {
                    heliceElement.classList.remove('recuperando');
                    actualizarHelice(motor);
                }, 1000);
            }
            
            tirosRestantes = tirosAntesDelDisparo;
            
            document.getElementById('tirosRestantes').textContent = `Tiros Restantes: ${tirosRestantes}`;
            document.getElementById('btnSortear').disabled = false;
            
            const helicesDisponibles = Object.keys(estadoHelices).filter(h => !estadoHelices[h].eliminada).length;
            const tiroActual = tirosTotales - tirosRestantes + 1;
            
            if (tirosRestantes > 0) {
                document.getElementById('estadoPrincipal').textContent = `üîß H√©lice ${motor} RECUPERADA - Vuelves a ${tirosRestantes} tiros - Tiro ${tiroActual}/${tirosTotales} - ${helicesDisponibles} disponibles`;
            } else {
                tirosRestantes = 1;
                document.getElementById('tirosRestantes').textContent = `Tiros Restantes: ${tirosRestantes}`;
                document.getElementById('estadoPrincipal').textContent = `üîß H√©lice ${motor} RECUPERADA - √öltima oportunidad: 1 tiro restante - ${helicesDisponibles} disponibles`;
            }
            
            ultimaHeliceDisparada = null;
            document.getElementById('textoUltima').textContent = '√öltima h√©lice disparada: Ninguna';
            document.getElementById('infoUltima').classList.remove('disponible');
            document.getElementById('btnRecupero').disabled = true;
            document.getElementById('btnRecupero').classList.remove('disponible');
            
            vibrarFeedback('recupero');
            console.log(`‚úÖ Recupero completado. Tiros restantes: ${tirosRestantes}`);
        }

        function clickHelice(motor) {
            if (sorteoActivo) {
                toggleExclusionEnSorteo(motor);
            } else {
                toggleHeliceManual(motor);
            }
            vibrarFeedback();
        }

        function toggleExclusionEnSorteo(motor) {
            if (estadoHelices[motor].eliminada) {
                document.getElementById('estadoPrincipal').textContent = `‚ùå H√©lice ${motor} est√° ELIMINADA - Usa RECUPERO si fall√≥ el lanzamiento`;
                return;
            }
            
            const heliceElement = document.querySelector(`[data-motor="${motor}"]`);
            const aspasElement = document.getElementById(`aspas${motor}`);
            
            if (!estadoHelices[motor].excluida) {
                estadoHelices[motor].excluida = true;
                estadoHelices[motor].encendida = false;
                
                helicesSecuencia = helicesSecuencia.filter(h => h !== motor);
                
                if (aspasElement) aspasElement.classList.remove('girando');
                if (heliceElement) {
                    heliceElement.classList.remove('encendida', 'secuencia-actual');
                    heliceElement.classList.add('excluida');
                }
                
                document.getElementById('estadoPrincipal').textContent = `‚ö†Ô∏è H√©lice ${motor} EXCLUIDA del sorteo - ${helicesSecuencia.length} participando`;
                
            } else {
                estadoHelices[motor].excluida = false;
                estadoHelices[motor].encendida = true;
                
                helicesSecuencia.push(motor);
                helicesSecuencia.sort((a, b) => a - b);
                
                if (aspasElement) aspasElement.classList.add('girando');
                if (heliceElement) {
                    heliceElement.classList.remove('excluida');
                    heliceElement.classList.add('encendida');
                }
                
                document.getElementById('estadoPrincipal').textContent = `‚úÖ H√©lice ${motor} INCLUIDA en sorteo - ${helicesSecuencia.length} participando`;
            }
            
            actualizarHelice(motor);
            
            if (helicesSecuencia.length === 0) {
                sorteoActivo = false;
                clearInterval(intervaloSorteo);
                document.getElementById('indicadorSecuencia').classList.remove('activo');
                document.getElementById('btnDisparar').disabled = true;
                document.getElementById('btnDisparar').classList.remove('listo');
                document.getElementById('btnSortear').disabled = false;
                document.getElementById('estadoPrincipal').textContent = '‚ùå No quedan h√©lices en secuencia - Incluye al menos una';
            }
        }

        function toggleHeliceManual(motor) {
            if (estadoHelices[motor].eliminada) return;
            
            estadoHelices[motor].encendida = !estadoHelices[motor].encendida;
            actualizarHelice(motor);
            
            const aspasElement = document.getElementById(`aspas${motor}`);
            if (aspasElement) {
                if (estadoHelices[motor].encendida) {
                    aspasElement.classList.add('girando');
                } else {
                    aspasElement.classList.remove('girando');
                }
            }
            
            const estado = estadoHelices[motor].encendida ? 'encendida' : 'apagada';
            document.getElementById('estadoPrincipal').textContent = `H√©lice ${motor} ${estado} manualmente`;
        }

        function iniciarAutoReset(segundos) {
            console.log(`‚è∞ Iniciando auto-reset en ${segundos} segundos`);
            segundosRestantes = segundos;
            
            timerAutoReset = setInterval(() => {
                segundosRestantes--;
                
                if (segundosRestantes <= 5) {
                    document.body.classList.add('countdown-urgente');
                    vibrarFeedback('error');
                }
                
                document.getElementById('estadoPrincipal').textContent = `‚è∞ Auto-reset en ${segundosRestantes}s - Presiona RESET para cancelar`;
                
                if (segundosRestantes <= 0) {
                    clearInterval(timerAutoReset);
                    timerAutoReset = null;
                    resetearTodo();
                    console.log('Auto-reset ejecutado');
                }
            }, 1000);
        }

        function resetearTodo() {
            console.log('üîÑ RESETEANDO sistema completo');
            
            if (intervaloSorteo) {
                clearInterval(intervaloSorteo);
                intervaloSorteo = null;
            }
            if (timerAutoReset) {
                clearInterval(timerAutoReset);
                timerAutoReset = null;
                segundosRestantes = 0;
            }
            
            document.body.classList.remove('countdown-urgente');
            document.querySelectorAll('.helice-item').forEach(h => {
                h.classList.remove('secuencia-actual', 'disparando', 'recuperando');
            });
            
            sorteoActivo = false;
            ultimaHeliceDisparada = null;
            tirosAntesDelDisparo = 0;
            tirosRestantes = tirosTotales;
            helicesSecuencia = [];
            
            for (let i = 1; i <= 5; i++) {
                estadoHelices[i] = { encendida: false, excluida: false, eliminada: false, rpm: estadoHelices[i].rpm };
                actualizarHelice(i);
                document.getElementById(`aspas${i}`).classList.remove('girando');
            }
            
            document.getElementById('btnSortear').disabled = false;
            document.getElementById('btnDisparar').disabled = true;
            document.getElementById('btnDisparar').classList.remove('listo');
            document.getElementById('btnRecupero').disabled = true;
            document.getElementById('btnRecupero').classList.remove('disponible');
            document.getElementById('indicadorSecuencia').classList.remove('activo');
            document.getElementById('infoUltima').classList.remove('disponible');
            
            document.getElementById('tirosRestantes').textContent = `Tiros Restantes: ${tirosRestantes}`;
            document.getElementById('textoUltima').textContent = '√öltima h√©lice disparada: Ninguna';
            document.getElementById('estadoPrincipal').textContent = `üîÑ SISTEMA RESETEADO - Presiona SORTEAR para iniciar tiro 1/${tirosTotales}`;
            
            vibrarFeedback('reset');
        }

        function actualizarHelice(motor) {
            const helice = document.querySelector(`[data-motor="${motor}"]`);
            const rpm = document.getElementById(`rpm${motor}`);
            
            if (!helice) return;
            
            helice.classList.remove('inicial', 'encendida', 'excluida', 'eliminada');
            
            if (estadoHelices[motor].eliminada) {
                helice.classList.add('eliminada');
                if (rpm) rpm.textContent = 'ELIMINADA';
            } else if (estadoHelices[motor].excluida) {
                helice.classList.add('excluida');
                if (rpm) rpm.textContent = 'EXCLUIDA';
            } else if (estadoHelices[motor].encendida) {
                helice.classList.add('encendida');
                if (rpm) rpm.textContent = `RPM: ${estadoHelices[motor].rpm}`;
            } else {
                helice.classList.add('inicial');
                if (rpm) rpm.textContent = 'RPM: 0';
            }
        }

        // ========== FUNCIONES DE PANELES ==========
        function abrirPanelRPM() {
            document.getElementById('overlay').classList.add('activo');
            document.getElementById('panelRPM').classList.add('activo');
            console.log('Panel RPM abierto');
        }

        function cerrarPanelRPM() {
            document.getElementById('overlay').classList.remove('activo');
            document.getElementById('panelRPM').classList.remove('activo');
        }

        function cambiarRPM(motor, valor) {
            estadoHelices[motor].rpm = parseInt(valor);
            document.getElementById(`valorRPM${motor}`).textContent = valor;
            
            if (estadoHelices[motor].encendida) {
                document.getElementById(`rpm${motor}`).textContent = `RPM: ${valor}`;
            }
            
            console.log(`RPM H√©lice ${motor}: ${valor}`);
        }

        function abrirPanelAudio() {
            document.getElementById('overlay').classList.add('activo');
            document.getElementById('panelAudio').classList.add('activo');
            console.log('Panel Audio abierto');
        }

        function cerrarPanelAudio() {
            document.getElementById('overlay').classList.remove('activo');
            document.getElementById('panelAudio').classList.remove('activo');
        }

        function toggleComandoVoz() {
            configuracionAudio.comandoVoz = !configuracionAudio.comandoVoz;
            const btn = document.getElementById('btnComandoVoz');
            btn.textContent = configuracionAudio.comandoVoz ? 'Activado' : 'Desactivado';
            btn.classList.toggle('activo', configuracionAudio.comandoVoz);
            
            if (configuracionAudio.comandoVoz) {
                console.log('üé§ Comando de voz ACTIVADO - Escuchando: "disparar", "sortear", "reset"');
                iniciarReconocimientoVoz();
            } else {
                console.log('üé§ Comando de voz DESACTIVADO');
                detenerReconocimientoVoz();
            }
        }

        function cambiarGanancia(valor) {
            configuracionAudio.ganancia = parseInt(valor);
            document.getElementById('valorGanancia').textContent = `${valor}%`;
            console.log(`üé§ Ganancia micr√≥fono: ${valor}%`);
        }

        function iniciarReconocimientoVoz() {
            if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
                const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                const recognition = new SpeechRecognition();
                
                recognition.continuous = true;
                recognition.lang = 'es-ES';
                recognition.interimResults = false;
                
                recognition.onresult = function(event) {
                    const command = event.results[event.results.length - 1][0].transcript.toLowerCase();
                    console.log(`üé§ Comando detectado: "${command}"`);
                    
                    if (command.includes('disparar')) {
                        if (!document.getElementById('btnDisparar').disabled) {
                            ejecutarDisparo();
                            document.getElementById('estadoPrincipal').textContent = 'üé§ Comando "DISPARAR" ejecutado por voz';
                        }
                    } else if (command.includes('sortear')) {
                        if (!document.getElementById('btnSortear').disabled) {
                            iniciarSorteo();
                            document.getElementById('estadoPrincipal').textContent = 'üé§ Comando "SORTEAR" ejecutado por voz';
                        }
                    } else if (command.includes('reset')) {
                        resetearTodo();
                        document.getElementById('estadoPrincipal').textContent = 'üé§ Comando "RESET" ejecutado por voz';
                    }
                };
                
                recognition.onerror = function(event) {
                    console.log('üé§ Error de reconocimiento:', event.error);
                };
                
                recognition.start();
                window.currentRecognition = recognition;
                
            } else {
                console.log('üé§ Reconocimiento de voz no soportado en este navegador');
                alert('Reconocimiento de voz no soportado en este navegador');
            }
        }

        function detenerReconocimientoVoz() {
            if (window.currentRecognition) {
                window.currentRecognition.stop();
                window.currentRecognition = null;
                console.log('üé§ Reconocimiento de voz detenido');
            }
        }

        function toggleRotacion() {
            rotacionAutomatica = !rotacionAutomatica;
            const btn = document.getElementById('btnRotacion');
            
            if (rotacionAutomatica) {
                btn.style.animation = 'rotar 2s linear infinite';
                btn.style.borderColor = '#00FF00';
            } else {
                btn.style.animation = 'none';
                btn.style.borderColor = '#666';
            }
            
            console.log(`Rotaci√≥n autom√°tica: ${rotacionAutomatica ? 'ON' : 'OFF'}`);
        }

        function cerrarPaneles() {
            document.getElementById('overlay').classList.remove('activo');
            document.getElementById('panelRPM').classList.remove('activo');
            document.getElementById('panelAudio').classList.remove('activo');
        }

        function descargarApp() {
            console.log('üì± Funci√≥n descargar app');
            alert('Funci√≥n de descarga no implementada en esta demo');
        }

        function vibrarFeedback(tipo = 'normal') {
            if (!('vibrate' in navigator)) return;
            
            switch (tipo) {
                case 'disparo':
                    navigator.vibrate([200, 100, 200, 100, 300]);
                    break;
                case 'sorteo':
                    navigator.vibrate([100, 50, 100]);
                    break;
                case 'reset':
                    navigator.vibrate([150, 100, 150]);
                    break;
                                case 'error':
                    navigator.vibrate([300, 100, 300]);
                    break;
                case 'recupero':
                    navigator.vibrate([100, 50, 100, 50, 100]);
                    break;
                default:
                    navigator.vibrate([100]);
            }
        }

        // Inicializaci√≥n
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üöÅ Sistema LHAZ - TODAS LAS LETRAS COMPLETAMENTE VISIBLES');
            console.log('‚ú® CORRECCIONES IMPLEMENTADAS:');
            console.log('   üî§ Color s√≥lido blanco #FFFFFF (sin gradientes transparentes)');
            console.log('   ‚ö´ Contorno negro s√∫per grueso (-6px a +6px)');
            console.log('   üåü Sin background-clip que cause transparencias');
            console.log('   üìè Tama√±o aumentado a 7rem para m√°xima visibilidad');
            console.log('   üé® Fondo negro s√≥lido rgba(0,0,0,0.95) para contraste');
            console.log('   üí° Adaptaci√≥n perfecta para modo d√≠a y noche');
            
            cargarTemaGuardado();
            
            for (let i = 1; i <= 5; i++) {
                actualizarHelice(i);
            }
            
            console.log('üéØ Sistema LHAZ listo - T√≠tulo L-H-A-Z completamente legible');
            console.log('üì± Todas las letras visibles en cualquier dispositivo');
        });
    </script>
<!-- INDICADOR BLUETOOTH MANUAL -->
<div id="panelBluetoothManual" style="
    position: fixed; 
    top: 15px; 
    right: 15px; 
    z-index: 9999;
    background: linear-gradient(45deg, #FF4444, #FF6666);
    color: white;
    padding: 12px 18px;
    border-radius: 30px;
    font-weight: bold;
    font-size: 14px;
    cursor: pointer;
    box-shadow: 0 4px 15px rgba(255,68,68,0.4);
    transition: all 0.3s ease;
    border: 2px solid #FFD700;
    user-select: none;
    font-family: 'Arial', sans-serif;
" onclick="toggleBluetoothManual()" id="btnBluetoothVisible">
    üì∂ CONECTAR BLUETOOTH
</div>

<script>
// FUNCI√ìN MANUAL BLUETOOTH
function toggleBluetoothManual() {
    const btn = document.getElementById('btnBluetoothVisible');
    
    if (window.estadoConexion === 'conectado') {
        // Desconectar
        if (window.desconectarBluetooth) {
            window.desconectarBluetooth();
        }
        
        btn.style.background = 'linear-gradient(45deg, #FF4444, #FF6666)';
        btn.textContent = 'üì∂ CONECTAR BLUETOOTH';
        btn.style.boxShadow = '0 4px 15px rgba(255,68,68,0.4)';
        
        document.getElementById('estadoPrincipal').textContent = 'üì± Bluetooth desconectado - Modo offline';
        
    } else if (window.estadoConexion === 'conectando') {
        // Ya conectando, no hacer nada
        return;
        
    } else {
        // Conectar
        btn.style.background = 'linear-gradient(45deg, #FF9900, #FFAA00)';
        btn.textContent = 'üì∂ CONECTANDO...';
        btn.style.boxShadow = '0 4px 15px rgba(255,153,0,0.4)';
        
        if (window.conectarBluetooth) {
            window.conectarBluetooth().then(exito => {
                if (exito) {
                    btn.style.background = 'linear-gradient(45deg, #00FF00, #44FF44)';
                    btn.textContent = 'üì∂ CONECTADO ‚úì';
                    btn.style.color = 'black';
                    btn.style.boxShadow = '0 4px 15px rgba(0,255,0,0.4)';
                    
                    document.getElementById('estadoPrincipal').textContent = '‚úÖ BLUETOOTH CONECTADO - Sistema LHAZ online';
                    
                    // Vibraci√≥n de √©xito
                    if (navigator.vibrate) {
                        navigator.vibrate([200, 100, 200]);
                    }
                    
                } else {
                    btn.style.background = 'linear-gradient(45deg, #FF4444, #FF6666)';
                    btn.textContent = 'üì∂ ERROR - REINTENTAR';
                    btn.style.color = 'white';
                    btn.style.boxShadow = '0 4px 15px rgba(255,68,68,0.4)';
                }
            });
        } else {
            alert('‚ö†Ô∏è Funciones Bluetooth no est√°n cargadas\nRecarga la p√°gina (F5) e int√©ntalo de nuevo');
            btn.style.background = 'linear-gradient(45deg, #FF4444, #FF6666)';
            btn.textContent = 'üì∂ CONECTAR BLUETOOTH';
        }
    }
}

// Actualizar bot√≥n cada 2 segundos
setInterval(() => {
    const btn = document.getElementById('btnBluetoothVisible');
    if (!btn) return;
    
    if (window.estadoConexion === 'conectado' && !btn.textContent.includes('CONECTADO')) {
        btn.style.background = 'linear-gradient(45deg, #00FF00, #44FF44)';
        btn.textContent = 'üì∂ CONECTADO ‚úì';
        btn.style.color = 'black';
        btn.style.boxShadow = '0 4px 15px rgba(0,255,0,0.4)';
        
    } else if (window.estadoConexion === 'desconectado' && !btn.textContent.includes('CONECTAR BLUETOOTH')) {
        btn.style.background = 'linear-gradient(45deg, #FF4444, #FF6666)';
        btn.textContent = 'üì∂ CONECTAR BLUETOOTH';
        btn.style.color = 'white';
        btn.style.boxShadow = '0 4px 15px rgba(255,68,68,0.4)';
        
    } else if (window.estadoConexion === 'conectando' && !btn.textContent.includes('CONECTANDO')) {
        btn.style.background = 'linear-gradient(45deg, #FF9900, #FFAA00)';
        btn.textContent = 'üì∂ CONECTANDO...';
        btn.style.color = 'white';
        btn.style.boxShadow = '0 4px 15px rgba(255,153,0,0.4)';
    }
}, 2000);

console.log('üì∂ Bot√≥n Bluetooth manual agregado y funcional');
</script>

</body>
</html>
</body>
</html>

